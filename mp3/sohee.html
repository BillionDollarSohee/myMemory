<!DOCTYPE html>
<html lang="ko" data-bs-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MUSIC PLAYLIST</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  
  <style>
    .hero {
      min-height: 40vh;
      display:grid;place-items:center;
      background:url("image/unsplash.jpg") center/cover no-repeat;
      position:relative;color:#fff;
    }
    .hero::after{content:"";position:absolute;inset:0;background:rgba(0,0,0,.4);}
    .hero .inner{position:relative;z-index:1;}
    .avatar{width:100px;height:100px;border-radius:50%;object-fit:cover;border:3px solid #fff;}
    .fixed-back{position:fixed;left:16px;bottom:16px;z-index:1030;}

    /* 🎵 플레이어 버튼 */
    .material-icons-round {
      font-size: 36px;
      vertical-align: middle;
    }

    /* 버튼 기본 */
    .control-btn {
      border: none;
      background: none;
      padding: 8px;
      cursor: pointer;
      color: var(--bs-body-color);
      transition: opacity 0.2s ease, color 0.3s ease, text-shadow 0.3s ease;
    }
    .control-btn:hover {
      opacity: 0.7;
    }

    /* 활성화 상태 (네온) */
    .control-btn.active {
      color: #1e90ff; /* 버튼 자체 색 */
      text-shadow: 0 0 2px #1e90ff,
                   0 0 6px rgba(30, 144, 255, 0.6);
    }

  /* 테두리 제거 */  
  .control-btn:focus {
    outline: none;
    box-shadow: none;
  }

  /* 공통 슬라이더 스타일 */
  #volumeControl {
    -webkit-appearance: none;
    width: 200px;
    height: 6px;
    border-radius: 3px;
    background: #fff; /* 기본은 흰색 (안 채워진 부분) */
    outline: none;
  }

  /* 채워진 부분 (크롬/사파리/엣지) */
  #volumeControl::-webkit-slider-runnable-track {
    height: 6px;
    border-radius: 3px;
    background: linear-gradient(to right, #f7aac9, #d94f8c) no-repeat;
  }

  /* Firefox */
  #volumeControl::-moz-range-track {
    height: 6px;
    border-radius: 3px;
    background: #fff;
  }
  #volumeControl::-moz-range-progress {
    height: 6px;
    border-radius: 3px;
    background: linear-gradient(to right, #f7aac9, #d94f8c);
  }

  /* 손잡이 스타일 */
  #volumeControl::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 14px;
    height: 24px;
    border-radius: 3px;
    background: #fff;
    border: 2px solid #999;
    cursor: pointer;
    position: relative;
    margin-top: -9px; /* track 중앙 정렬 */
  }
  #volumeControl::-moz-range-thumb {
    width: 14px;
    height: 24px;
    border-radius: 3px;
    background: #fff;
    border: 2px solid #999;
    cursor: pointer;
  }

  </style>
</head>
<body>
<a href="index.html" class="btn btn-outline-secondary fixed-back">← 메인</a>

<!-- nav bar -->
<div id="navbar-placeholder"></div>

<!-- Hero -->
<header class="hero">
  <div class="inner text-center">
    <img src="https://picsum.photos/300?random=5" alt="프로필" class="avatar mb-3">
    <h1 class="fw-bold">Play your story</h1>
    <p class="lead mb-0">One good thing about music, when it hits you, you feel no pain.</p>
  </div>
</header>

<section class="py-5">
  <div class="container">
    <h2 class="h4 fw-bold mb-3">About</h2>
    <p>
        음악을 기록하고, 또 누군가와 나누기 위한 작은 공간입니다.<br>
        언젠가 이곳에 다른 사람들의 플레이리스트도 담겨, 서로의 음악 취향이 이어지길 바랍니다.
    </p>
  </div>
</section>

<!-- 음악 플레이어 -->
<section class="py-5 bg-body-secondary">
  <div class="container text-center">
    <h2 class="h4 fw-bold mb-3">MUSIC PLAYER</h2>

    <canvas id="visualizer" width="600" height="200" class="w-100 mb-3"></canvas>

    <!-- 컨트롤 버튼 -->
    <div class="d-flex justify-content-center align-items-center gap-4 mb-3">
      <!-- 셔플 -->
      <button id="shuffleBtn" class="control-btn" aria-label="셔플">
        <span class="material-icons-round">shuffle</span>
      </button>

      <!-- 이전곡 -->
      <button id="prevBtn" class="control-btn" aria-label="이전">
        <span class="material-icons-round">skip_previous</span>
      </button>

      <!-- 재생/정지 -->
      <button id="playPauseBtn" class="control-btn play-btn" aria-label="재생/일시정지">
        <span id="playIcon" class="material-icons-round">play_arrow</span>
      </button>

      <!-- 다음곡 -->
      <button id="nextBtn" class="control-btn" aria-label="다음">
        <span class="material-icons-round">skip_next</span>
      </button>

      <!-- 반복 -->
      <button id="repeatBtn" class="control-btn" aria-label="반복">
        <span class="material-icons-round">repeat</span>
      </button>
    </div>

    <!-- 🔊 볼륨 컨트롤 -->
    <div class="d-flex align-items-center justify-content-center gap-2 mb-3">
      <label for="volumeControl" class="form-label mb-0 small">볼륨</label>
      <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="1">
      <span id="volumeValue" class="small fw-semibold">100</span>
    </div>

    <p id="nowPlaying" class="fw-semibold"></p>
    <audio id="audio" crossorigin="anonymous"></audio>
  </div>
</section>

<!-- My Playlist -->
<section class="py-5">
  <div class="container">
    <h2 class="h4 fw-bold mb-4">🎶 My Playlist</h2>

    <!-- 새로운 곡 추가 (드래그 앤 드롭) -->
    <div id="dropZone" class="p-5 border border-dashed text-center bg-body-tertiary">
      🎵 여기에 음악 파일을 끌어다 놓으세요
    </div>
    <ul id="myPlaylist" class="list-group mt-3"></ul>
  </div>
</section>

<!-- Footer -->
<footer class="py-4 bg-body-tertiary text-center small text-body-secondary">
  © <span id="year"></span> 나의 추억 페이지
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- 🎵 Player JS 분리 -->
<script src="player.js"></script>
</body>
</html>
